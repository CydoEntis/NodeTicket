<%- include("../includes/header.ejs")%>
</head>
<body>
    <%- include("../includes/side-navigation.ejs")%>
    <main class="wrapper">
        <section class="panel">
            <div class="panel-header">
                <a href="/admin"><div class="btn btn-back"><i class='bx bx-arrow-back'></i></div></a><h1>Admin Panel</h1>
            </div>
            <section class="">
                <table class="admin-table">
                    <div class="admin-controls">
                        <a class="badge badge-minor"href="">All Tasks</a>
                        <a class="badge badge-moderate"href="">In Progress</a>
                        <a class="badge badge-urgent"href="">On Hold</a>
                        <a class="badge badge-complete"href="">Completed</a>
                    </div>
                    <tr>
                        <th>Date</th>
                        <th>Title</th>
                        <th>Submitted By</th>
                        <th>Assigned To</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                    <% for(let task of tasks) {%>
                    <tr>
                        <td><%= task.createdAt %></td>
                        <td><%= task._doc.title %></td>
                        <td><%= task._doc.createdBy.username %></td>
                        <% if(!task._doc.assignedTo.userId) { %>
                            <td class="indicator indicator-warning">Pending</td>
                        <% } else { %>
                            <td class="indicator indicator-ok"><%= task._doc.assignedTo.username %></td>
                        <% } %>

                        <% if(!task._doc.assignedTo.userId) { %>
                            <td class="indicator indicator-warning">Not Assigned</td>
                        <% } else if(task._doc.completed && task._doc.assignedTo.userId) { %>
                            <td class="indicator indicator-success">Completed</td>
                        <% } else if(task._doc.isOnHold) { %>
                            <td class="indicator indicator-error">On Hold</td>
                        <% } else if(task._doc.assignedTo.userId && !task._doc.completed) { %>
                            <td class="indicator indicator-ok">In Progress</td>
                        <% } %>
                        <td><a class="admin-link" href="/edit-task/<%= task._doc._id %>">Review</a></td>
                    </tr>
                    <% } %>
                </table>
            </section>
        </section>
    </main>
<%- include("../includes/footer.ejs")%>`